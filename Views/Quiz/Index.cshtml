@model QuizPrepAi.Models.QuizModel

@{
    ViewData["Title"] = "Quiz";
}

<div class="container">
    <h1 class="mb-4">Quiz</h1>

    <form asp-controller="Quiz" asp-action="Quiz" method="post">
        <div class="panel panel-default">
            <div class="panel-body">ChatGPT Completions In ASP.NET Core Web API</div>
            <div class="panel-body">
                <div class="col-sm-9">
                    <input type="text" name="quizText" value="@ViewBag.Text" class="form-control" autocomplete="off" />
                </div>
                <div class="col-sm-3" style="margin-left: -70px;">
                    <input type="submit" class="btn btn-primary" value="Search Answer" />
                </div>

            </div>
        </div>
    </form>

    <form method="post" id="quiz-form">

        @{
            var questions = Model?.Questions;
        }

        @for (var i = 0; i < questions?.Count; i++)
        {
            var question = questions?[i];
            <div class="quiz-question mb-4" id="question-@i" @(i != 0 ? "style=display:none;" : "")>
                <h2>@question.Question</h2>
                <div class="quiz-answers">
                    @for (var j = 0; j < question.Answers.Count; j++)
                    {
                        var answer = question.Answers[j];
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="answer-@i" id="answer-@i-@j" value="@answer">
                            <label class="form-check-label" for="answer-@i-@j">
                                @answer
                            </label>
                        </div>
                    }
                </div>
                <input type="hidden" name="correct-answer-@i" value="@question.CorrectAnswer">
            </div>
        }

        <input type="hidden" name="total-questions" value="@Model?.TotalQuestions">
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>